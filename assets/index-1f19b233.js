import{m as f,l as E,u as N,r,j as s,N as R,S as v,L as y,k as I,B as x,O as k}from"./index-337be76e.js";import{u as c}from"./store-b741a27c.js";import{C as w}from"./card-16952b2c.js";const C=f("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),b=f("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function S(){const u=E(),m=N(),l=c(e=>e.routines),o=c(e=>e.actualRoutineExecutionId),d=c(e=>e.setActualRoutineExecutionId),h=c(e=>e.addRoutineExecution),t=r.useMemo(()=>{const e=l.find(n=>n.id===u.routineId);return e||null},[u.routineId,l]),i=r.useMemo(()=>{if(!t||!o)return null;const e=t.executions.find(a=>a.id===o);if(e)return e;const n={id:o,exercises:[]};return h(t.id,n),n},[t,o]);r.useEffect(()=>{o===null&&d(crypto.randomUUID())},[o]);const p=r.useMemo(()=>!t||!i?!1:t.exercises.every(e=>{const n=i.exercises.find(a=>a.id===e.id);return n?n.sets.length===e.sets:!1}),[t==null?void 0:t.exercises,i==null?void 0:i.exercises]),g=()=>{!t||!i||(d(null),m(".."))};return t?s.jsxs(v,{className:"gap-3",children:[s.jsx("h2",{className:"text-4xl font-bold",children:t.name}),s.jsx("hr",{}),s.jsx("div",{className:"-mx-3 flex h-0 grow flex-col gap-4 overflow-auto px-3",children:t.exercises.map(e=>{const n=i==null?void 0:i.exercises.find(j=>j.exerciseId===e.id),a=n&&n.sets.length>=e.sets;return s.jsx(y,{to:`/execute/${t.id}/${e.id}`,children:s.jsxs(w,{className:I("flex flex-row items-center gap-4 px-6 py-4",a&&"border-success bg-success/5"),children:[s.jsxs("div",{className:"flex grow flex-col items-start",children:[s.jsx("h5",{className:"text-2xl font-bold",children:e.name}),s.jsxs("p",{className:"text-foreground/50",children:[e.sets,"x",e.reps," ",e.weight&&`${e.weight}Kg`]})]}),s.jsx(x,{type:"button",variant:"outline",size:"icon",children:a?s.jsx(C,{}):s.jsx(b,{})})]})},e.id)})}),s.jsx(x,{variant:p?"default":"outline",onClick:g,children:"Finalizar Rutina"}),s.jsx(k,{})]}):s.jsx(R,{to:".."})}export{S as default};
