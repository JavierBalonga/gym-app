import{m as g,l as j,u as E,r as a,j as s,N,S as R,B as x,L as v}from"./index-f0759db8.js";import{u as r}from"./store-d685386f.js";import{C as y}from"./card-cc5931f3.js";const I=g("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function b(){const c=j(),f=E(),l=r(e=>e.routines),i=r(e=>e.actualRoutineExecutionId),d=r(e=>e.setActualRoutineExecutionId),m=r(e=>e.addRoutineExecution),t=a.useMemo(()=>{const e=l.find(n=>n.id===c.routineId);return e||null},[c.routineId,l]),o=a.useMemo(()=>{if(!t||!i)return null;const e=t.executions.find(u=>u.id===i);if(e)return e;const n={id:i,exercises:[]};return m(t.id,n),n},[t,i]);a.useEffect(()=>{i===null&&d(crypto.randomUUID())},[i]);const p=a.useMemo(()=>!t||!o?!1:t.exercises.every(e=>{const n=o.exercises.find(u=>u.id===e.id);return n?n.sets.length===e.sets:!1}),[t==null?void 0:t.exercises,o==null?void 0:o.exercises]),h=()=>{!t||!o||(d(null),f(".."))};return t?s.jsxs(R,{className:"gap-3",children:[s.jsx("h2",{className:"text-4xl font-bold",children:t.name}),s.jsx("hr",{}),s.jsx("div",{className:"-mx-3 flex h-0 grow flex-col gap-4 overflow-auto px-3",children:t.exercises.map(e=>s.jsxs(y,{className:"flex flex-row items-center gap-4 px-6 py-4",children:[s.jsxs("div",{className:"flex grow flex-col items-start",children:[s.jsx("h5",{className:"text-2xl font-bold",children:e.name}),s.jsxs("p",{className:"text-foreground/50",children:[e.sets,"x",e.reps," ",e.weight&&`${e.weight}Kg`]})]}),s.jsx(x,{type:"button",variant:"outline",size:"icon",asChild:!0,children:s.jsx(v,{to:`/execute/${t.id}/${e.id}`,children:s.jsx(I,{})})})]},e.id))}),s.jsx(x,{variant:p?"default":"outline",onClick:h,children:"Finalizar Rutina"})]}):s.jsx(N,{to:".."})}export{b as default};
