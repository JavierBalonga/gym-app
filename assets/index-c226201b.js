import{m as j,l as g,u as E,r as a,j as s,N,S as R,L as v,B as d,O as y}from"./index-31d45b79.js";import{u as r}from"./store-7b6b5fa9.js";import{C as I}from"./card-668f43e8.js";const w=j("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function k(){const c=g(),f=E(),l=r(e=>e.routines),i=r(e=>e.actualRoutineExecutionId),x=r(e=>e.setActualRoutineExecutionId),m=r(e=>e.addRoutineExecution),t=a.useMemo(()=>{const e=l.find(n=>n.id===c.routineId);return e||null},[c.routineId,l]),o=a.useMemo(()=>{if(!t||!i)return null;const e=t.executions.find(u=>u.id===i);if(e)return e;const n={id:i,exercises:[]};return m(t.id,n),n},[t,i]);a.useEffect(()=>{i===null&&x(crypto.randomUUID())},[i]);const p=a.useMemo(()=>!t||!o?!1:t.exercises.every(e=>{const n=o.exercises.find(u=>u.id===e.id);return n?n.sets.length===e.sets:!1}),[t==null?void 0:t.exercises,o==null?void 0:o.exercises]),h=()=>{!t||!o||(x(null),f(".."))};return t?s.jsxs(R,{className:"gap-3",children:[s.jsx("h2",{className:"text-4xl font-bold",children:t.name}),s.jsx("hr",{}),s.jsx("div",{className:"-mx-3 flex h-0 grow flex-col gap-4 overflow-auto px-3",children:t.exercises.map(e=>s.jsx(v,{to:`/execute/${t.id}/${e.id}`,children:s.jsxs(I,{className:"flex flex-row items-center gap-4 px-6 py-4",children:[s.jsxs("div",{className:"flex grow flex-col items-start",children:[s.jsx("h5",{className:"text-2xl font-bold",children:e.name}),s.jsxs("p",{className:"text-foreground/50",children:[e.sets,"x",e.reps," ",e.weight&&`${e.weight}Kg`]})]}),s.jsx(d,{type:"button",variant:"outline",size:"icon",children:s.jsx(w,{})})]})},e.id))}),s.jsx(d,{variant:p?"default":"outline",onClick:h,children:"Finalizar Rutina"}),s.jsx(y,{})]}):s.jsx(N,{to:".."})}export{k as default};
