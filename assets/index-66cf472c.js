import{r as l,j as e,k as E,l as A,u as W,S as _,B as j,L as w}from"./index-24a227e3.js";import{u as $}from"./store-ec38f22a.js";import{C as z,T as D}from"./card-54102eb9.js";import{C as N,a as y}from"./chevron-up-5ba81fdd.js";const P=60,g=48,k=45,L=45,T=l.createContext(null);function I({children:n,value:a,onChange:u}){const[d,x]=l.useState(0),f=l.useRef([]),i=l.useRef(null);l.useEffect(()=>{a!==void 0&&x(-a*g)},[a]);const p=(t,m)=>{f.current[t]=m},h=t=>{i.current=d+t.touches[0].clientY},r=t=>{if(i.current===null)return;const m=i.current-t.touches[0].clientY;x(m)},o=()=>{i.current=null;const t=-Math.round(d/g);x(-t*g);const m=f.current[t];u==null||u(m)};return e.jsx(T.Provider,{value:{delta:d,onTouchStart:h,onTouchMove:r,onTouchEnd:o,registerItem:p},children:n})}const C=()=>{const n=l.useContext(T);if(!n)throw new Error("useWheelInput must be used within a WheelInput");return n};function S({className:n,children:a,...u}){const{onTouchStart:d,onTouchMove:x,onTouchEnd:f}=C();return e.jsx("ul",{...u,className:E("relative h-32 w-full overflow-hidden border first-of-type:rounded-l-xl last-of-type:rounded-r-xl",n),onTouchStart:d,onTouchMove:x,onTouchEnd:f,children:a})}function b({value:n,className:a,children:u,...d}){const{delta:x,registerItem:f}=C(),[i,p]=l.useState(null),h=l.useMemo(()=>{var t;if(i===null)return null;const r=i.parentElement;if(r===null)return null;const o=(t=r==null?void 0:r.parentElement)==null?void 0:t.children;return o===void 0?null:Array.from(o).indexOf(r)},[i]);return l.useEffect(()=>{h!==null&&f(h,n)},[n]),l.useEffect(()=>{if(i===null||h===null)return;const r=x/g,o=B(-90,r*L+h*k,90);i.style.setProperty("transform",`rotateX(${o}deg) translate3d(0px, 0px, ${P}px)`)},[i,h,x]),e.jsx("li",{className:"absolute left-0 top-1/2 w-full -translate-y-1/2",style:{height:g},children:e.jsx("div",{className:E("absolute left-0 top-0 flex w-full items-center justify-center transition-transform duration-75 [transform-style:_preserve-3d;]",a),...d,style:{height:g},ref:p,children:u||n})})}function B(n,a,u){return Math.max(n,Math.min(u,a))}function O(){const n=A(),a=W(),u=$(s=>s.routines),[d,x]=l.useState([]),[f,i]=l.useState(0),[p,h]=l.useState(0),r=l.useMemo(()=>{const s=Number(n.exerciseIndex);return isNaN(s)?a(".."):s},[n.exerciseIndex]),o=l.useMemo(()=>{const s=u.find(c=>c.id===n.id);return s||a("..")},[n.id,u]),t=l.useMemo(()=>{if(!r)return a("..");const s=o==null?void 0:o.exercises[r-1];return s?(i(s.weight),h(s.reps),s):a("..")},[r,o]),m=()=>{x(s=>s.concat({weight:f,reps:p}))},M=s=>{x(c=>c.filter((F,R)=>R!==s))},v=l.useMemo(()=>t?t.sets-d.length:null,[t==null?void 0:t.sets,d.length]);return!o||!t?null:e.jsxs(_,{className:"gap-3",children:[e.jsx("h2",{className:"text-4xl font-bold",children:o==null?void 0:o.name}),e.jsx("hr",{}),e.jsxs("div",{className:"flex flex-row flex-wrap items-baseline justify-between gap-2",children:[e.jsx("h3",{className:"text-2xl",children:t==null?void 0:t.name}),e.jsxs("p",{className:"text-foreground/50",children:[t.sets,"x",t.reps," ",t.weight&&`${t.weight}Kg`]})]}),e.jsx("hr",{}),e.jsx("div",{className:"flex flex-col gap-2",children:d.map((s,c)=>e.jsxs(z,{className:"flex flex-row items-center gap-3 py-2 pl-6 pr-2",children:[e.jsxs("span",{children:[c+1," Serie"]}),e.jsx("div",{className:"grow"}),e.jsxs("span",{children:[s.reps,"Reps ",s.weight,"Kg"]}),e.jsx(j,{type:"button",variant:"outline",size:"icon",onClick:()=>M(c),children:e.jsx(D,{})})]},c))}),v!==null&&v>0&&e.jsx("p",{className:"text-center text-foreground/50",children:v===1?"Falta 1 Serie":`Faltan ${v} Series`}),e.jsx("div",{className:"grow"}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsx("span",{className:"text-center",children:"Peso"}),e.jsx("span",{className:"text-center",children:"Repeticiones"}),e.jsx(I,{value:f,onChange:i,children:e.jsx(S,{children:Array.from({length:200},(s,c)=>e.jsx(b,{value:c/2},c))})}),e.jsx(I,{value:p,onChange:h,children:e.jsx(S,{children:Array.from({length:99},(s,c)=>e.jsx(b,{value:c+1},c))})})]}),e.jsxs("div",{className:"flex flex-row gap-2 pt-4",children:[r&&r>1?e.jsx(j,{type:"button",variant:"outline",size:"icon",asChild:!0,children:e.jsx(w,{to:`/run/${n.id}/${r-1}`,children:e.jsx(N,{})})}):e.jsx(j,{type:"button",variant:"outline",size:"icon",asChild:!0,disabled:!0,children:e.jsx(N,{})}),r&&r<o.exercises.length?e.jsx(j,{type:"button",variant:"outline",size:"icon",asChild:!0,children:e.jsx(w,{to:`/run/${n.id}/${r+1}`,children:e.jsx(y,{})})}):e.jsx(j,{type:"button",variant:"outline",size:"icon",asChild:!0,disabled:!0,children:e.jsx(y,{})}),e.jsx(j,{type:"button",variant:"default",className:"w-full grow",onClick:m,children:"Agregar Serie"})]})]})}export{O as default};
